
import java.awt.FileDialog;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.util.ArrayList;

import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.JPanel;

import edu.stanford.nlp.tagger.maxent.MaxentTagger;
// http://www.galalaly.me/index.php/2011/05/tagging-text-with-stanford-pos-tagger-in-java-applications/

public class Main extends JFrame{
	static ArrayList<String> conceptArray = new ArrayList<String>();
	static ArrayList<String> nouns = new ArrayList<String>();
	static ArrayList<String> verbs = new ArrayList<String>();
	
	public Main(){  initUI(); }
	
	public final void initUI(){
		final JPanel panel = new JPanel();
	    final JFrame frame = new JFrame();
	    JButton Button = new JButton("Choose File");
	    getContentPane().add(panel);
	    panel.setLayout(null);
	    panel.add(Button);
	    setTitle("Browse for file");
	    setSize(300, 200);
	    setLocationRelativeTo(null);
	    setDefaultCloseOperation(EXIT_ON_CLOSE);
       
	    Button.setBounds(30, 60, 250, 30);
	    Button.addActionListener(new ActionListener() {
	        @SuppressWarnings("deprecation")
			public void actionPerformed(ActionEvent event) {
	        	FileDialog fd = new FileDialog(frame, "Choose a file", FileDialog.LOAD);
				//fd.setDirectory("C:\\");
				fd.setFile("*.txt");
				fd.setVisible(true);
				String filename = fd.getFile();
				if(filename == null){
					System.out.println("Cancelled");
				}
				else { //read file
					System.out.println("You chose "+ filename);
					String directory = fd.getDirectory();
					System.out.println(directory);
					filename = directory+filename;
					try{
						conceptArray = ReadFile(filename);
					}
					catch(IOException e){
						System.out.println("NOTHING");
					} 

					//TAG
					try {
						conceptArray = Tag(conceptArray);
					} catch (ClassNotFoundException | IOException e) {
						// TODO Auto-generated catch block
						e.printStackTrace();
					}
					
					for(String str : conceptArray){
						System.out.println(str);
					}
					//Process();
					
				} //end else
	        } // end action
	    }); //end action listener

	} //end initUI
	
	public static ArrayList<String> ReadFile(String filename) throws IOException { 
		ArrayList<String> conceptArray = new ArrayList<String>();
		FileReader fr = new FileReader(filename);
		BufferedReader reader = new BufferedReader(fr);
		String fullStatement="";
		String nextLine;
		
		while((nextLine = reader.readLine()) != null){
			fullStatement += nextLine;
		}
		int periods = 0;
		for(char c : fullStatement.toCharArray()){
			if(c == '.'){
				periods++;				
			}
		}
		//System.out.println(periods);
		String delimit = "[.]";
		String[] tempAr = fullStatement.split(delimit);
		
		for(int i = 0; i < tempAr.length ; i++){
			conceptArray.add(tempAr[i].trim());
		}

		return conceptArray;
	}
	
	public static ArrayList<String> Tag(ArrayList<String> concept) throws ClassNotFoundException, IOException{
		MaxentTagger tagger = new MaxentTagger("taggers/bidirectional-distsim-wsj-0-18.tagger");
		int i = 0;
		ArrayList<String> temp = new ArrayList<String>();
		
		for(String str : concept){
			str = tagger.tagString(str);
			temp.add(str);
		}
		return temp;
	}
	
	public static void FindNouns(){
		//String x = conceptArray.get(1);
		
		
	}
	
	public static void Process(){
		String[][] toPlant = new String[conceptArray.size()][3];
		String noun1 = "";
		String verb = "";
		String noun2 = "";
		int x = 0;
		for(String str : conceptArray){
			while (str != null){
				x = str.indexOf("/N");
				noun1 = str.substring(0, x);
				System.out.println(noun1);
				break;
			}
		} //end for
	}
	
	
	public static void main(String[] args){
	           Main ex = new Main();
	           ex.setVisible(true); 
	           ex.Process();
	}
	
//		ActionListener actionListener = new ActionListener(){
//			public void actionPerformed(ActionEvent actionEvent){
//				FileDialog fd = new FileDialog(frame, "Choose a file", FileDialog.LOAD);
//				fd.setDirectory("C:\\");
//				fd.setFile("*.txt");
//				fd.setVisible(true);
//				String filename = fd.getFile();
//				if(filename == null){
//					System.out.println("Cancelled");
//				}
//				else {
//					System.out.println("You chose "+ filename);
//				}
//			}
//		};
		

		
		
		//parser();
		
	
}